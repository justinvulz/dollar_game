from sympy import Matrix, ZZ
from sympy.matrices.normalforms import smith_normal_form
from sympy import *

mm = [[ 3, -1, -1,  0, -1,  0 , 0,  0],
 [-1,  3,  0, -1,  0, -1 , 0,  0],
 [-1,  0,  3, -1,  0,  0 ,-1,  0],
 [ 0, -1, -1,  3,  0,  0 , 0, -1],
 [-1,  0,  0,  0,  3, -1 ,-1,  0],
 [ 0, -1,  0,  0, -1,  3 , 0, -1],
 [ 0,  0, -1,  0, -1,  0 , 3, -1],
 [ 0,  0,  0, -1,  0, -1 ,-1,  3],]



mm = [[8737931403336115664,  8737931403336098528,  8737931403336101608,  8737931403336102544,   970881267037340464],
 [-640247499443362336,  1769936410929625424,  4592041198216558352, -7630750677134445400,  8363672100171845224],
 [5210024295195385480,  -338373666559300672,  3008911568758225296, -7384035946658191528,  -966866856552779544],
 [4434364354154178448,  7013164613050328616, -3523918743267048768, -5834982766080147072, -1831445703350040456],
 [3791506852504302960,   357436259741036840, -7345285896281472720, -5995100691190860392, -1807890056560789344]]

m = [[ 4, -1, -1,  0, -1,  0,  0,  0, -1,  0,  0,  0,  0,  0,  0],
 [-1,  4,  0, -1,  0, -1,  0,  0,  0, -1,  0,  0,  0,  0,  0],
 [-1,  0,  4, -1,  0,  0, -1,  0,  0,  0, -1,  0,  0,  0,  0],
 [ 0, -1, -1,  4,  0,  0,  0, -1,  0,  0,  0, -1,  0,  0,  0],
 [-1,  0,  0,  0,  4, -1, -1,  0,  0,  0,  0,  0, -1,  0,  0],
 [ 0, -1,  0,  0, -1,  4,  0, -1,  0,  0,  0,  0,  0, -1,  0],
 [ 0,  0, -1,  0, -1,  0,  4, -1,  0,  0,  0,  0,  0,  0, -1],
 [ 0,  0,  0, -1,  0, -1, -1,  4,  0,  0,  0,  0,  0,  0,  0],
 [-1,  0,  0,  0,  0,  0,  0,  0,  4, -1, -1,  0, -1,  0,  0],
 [ 0, -1,  0,  0,  0,  0,  0,  0, -1,  4,  0, -1,  0, -1,  0],
 [ 0,  0, -1,  0,  0,  0,  0,  0, -1,  0,  4, -1,  0,  0, -1],
 [ 0,  0,  0, -1,  0,  0,  0,  0,  0, -1, -1,  4,  0,  0,  0],
 [ 0,  0,  0,  0, -1,  0,  0,  0, -1,  0,  0,  0,  4, -1, -1],
 [ 0,  0,  0,  0,  0, -1,  0,  0,  0, -1,  0,  0, -1,  4,  0],
 [ 0,  0,  0,  0,  0,  0, -1,  0,  0,  0, -1,  0, -1,  0,  4],]
m = Matrix(mm)
m = smith_normal_form(m, domain=ZZ)
print(m)
for i in range(5):
    print(m[i,i])


